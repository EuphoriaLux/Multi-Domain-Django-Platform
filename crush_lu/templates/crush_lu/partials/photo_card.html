{% load i18n %}
<div class="photo-upload-card {% if is_main %}photo-upload-card--main{% endif %}" role="group" aria-labelledby="photo-label-{{ slot }}">
    <div class="photo-label" id="photo-label-{{ slot }}">
        {% if is_main %}<span aria-hidden="true">{% include "shared/icons/star.html" with class="w-5 h-5" %}</span> {% trans "Main Photo" %}{% else %}{% blocktrans with slot=slot %}Add Photo {{ slot }}{% endblocktrans %}{% endif %}
    </div>
    <div class="photo-preview-container{% if photo %} has-photo{% endif %}">
        {% if photo %}
            <img src="{{ photo.url }}" alt="{% if is_main %}{% trans "Main profile photo" %}{% else %}{% blocktrans with slot=slot %}Profile photo {{ slot }}{% endblocktrans %}{% endif %}" class="photo-preview" id="preview-photo-{{ slot }}" loading="lazy">
            <button type="button"
                    class="photo-delete-btn"
                    hx-delete="{% url 'api_delete_profile_photo' slot %}"
                    hx-target="#photo-card-{{ slot }}"
                    hx-swap="innerHTML"
                    hx-confirm="{% trans "Remove this photo?" %}"
                    aria-label="{% blocktrans with slot=slot %}Remove photo {{ slot }}{% endblocktrans %}">
                {% include "shared/icons/trash.html" with class="w-4 h-4" %}
            </button>
        {% else %}
            <div class="photo-placeholder" id="preview-photo-{{ slot }}" aria-hidden="true">
                {% include "shared/icons/camera.html" with class="w-10 h-10" %}
            </div>
        {% endif %}
    </div>
    <div class="photo-upload-wrapper">
        <input type="file"
               name="photo_{{ slot }}"
               id="id_photo_{{ slot }}"
               accept="image/jpeg,image/png,image/webp"
               hx-post="{% url 'api_upload_profile_photo' slot %}"
               hx-target="#photo-card-{{ slot }}"
               hx-swap="innerHTML"
               hx-encoding="multipart/form-data"
               hx-indicator="#photo-indicator-{{ slot }}"
               aria-label="{% if is_main %}{% trans "Upload main profile photo" %}{% else %}{% blocktrans with slot=slot %}Upload profile photo {{ slot }}{% endblocktrans %}{% endif %}"
               aria-describedby="photo-help-{{ slot }}">
        <div class="photo-upload-btn" aria-hidden="true">
            {% include "shared/icons/camera.html" with class="w-4 h-4" %}
            <span>{% if photo %}{% trans "Change Photo" %}{% else %}{% trans "Upload Photo" %}{% endif %}</span>
        </div>
    </div>
    <div id="photo-indicator-{{ slot }}" class="htmx-indicator tw-mt-2 tw-text-center">
        <span class="tw-text-crush-purple tw-text-sm">
            {% include "shared/icons/arrow-path.html" with class="w-5 h-5 tw-animate-spin" %} {% trans "Uploading..." %}
        </span>
    </div>
    <div class="photo-help" id="photo-help-{{ slot }}">
        {% if is_main %}
            {% if photo %}{% trans "Upload to replace" %}{% else %}{% trans "Your primary photo" %}{% endif %}
        {% elif slot == 2 %}
            {% trans "Show more of you" %}
        {% else %}
            {% trans "Add variety" %}
        {% endif %}
    </div>
</div>
