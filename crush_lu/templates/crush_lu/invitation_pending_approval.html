{% extends 'crush_lu/base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Invitation Accepted - Pending Approval - Crush.lu" %}{% endblock %}

{% block extra_css %}
<style>
    .pending-card {
        background: white;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        padding: 3rem;
        max-width: 700px;
        margin: 2rem auto;
        text-align: center;
    }

    .pending-icon {
        font-size: 5rem;
        margin-bottom: 1rem;
        animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
        0%, 100% {
            transform: scale(1);
            opacity: 1;
        }
        50% {
            transform: scale(1.1);
            opacity: 0.8;
        }
    }

    .timeline {
        position: relative;
        padding: 2rem 0;
        margin: 2rem 0;
    }

    .timeline-item {
        display: flex;
        align-items: center;
        margin-bottom: 2rem;
        position: relative;
    }

    .timeline-item:last-child {
        margin-bottom: 0;
    }

    .timeline-icon {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        margin-right: 1.5rem;
        flex-shrink: 0;
    }

    .timeline-icon.completed {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
    }

    .timeline-icon.active {
        background: linear-gradient(135deg, #ffc107, #ff9800);
        color: white;
        animation: pulse 2s ease-in-out infinite;
    }

    .timeline-icon.pending {
        background: #e9ecef;
        color: #6c757d;
    }

    .timeline-content {
        flex-grow: 1;
        text-align: left;
    }

    .timeline-content h6 {
        margin: 0;
        color: var(--crush-dark);
    }

    .timeline-content p {
        margin: 0;
        color: #6c757d;
        font-size: 0.9rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="flex justify-center">
    <div class="w-full max-w-4xl px-4">
        <div class="pending-card">
            <!-- Success Icon -->
            <div class="pending-icon">⏳</div>

            <!-- Header -->
            <h2 style="color: var(--crush-purple);">{% trans "Invitation Accepted Successfully!" %}</h2>
            <p class="lead text-muted mb-4">
                {% blocktrans with name=invitation.guest_first_name %}Welcome, {{ name }}! Your account has been created.{% endblocktrans %}
            </p>

            <!-- Success Alert -->
            <div class="alert alert-success bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 p-4 rounded-lg">
                <h5 class="alert-heading text-green-800 dark:text-green-300 font-semibold mb-2">
                    {% include "shared/icons/check-circle.html" with class="w-5 h-5" %} {% trans "You're In!" %}
                </h5>
                <p class="mb-0 text-green-700 dark:text-green-300">
                    {% trans "Your invitation has been accepted and your guest account is ready. Our Crush Coach is reviewing your attendance request." %}
                </p>
            </div>

            <!-- Timeline -->
            <div class="timeline">
                <h5 class="mb-4">{% trans "Your Journey to the Event" %}</h5>

                <div class="timeline-item">
                    <div class="timeline-icon completed">
                        {% include "shared/icons/envelope-open.html" with class="w-5 h-5" %}
                    </div>
                    <div class="timeline-content">
                        <h6>{% trans "✅ Invitation Received" %}</h6>
                        <p>{% trans "You received your exclusive invitation" %}</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-icon completed">
                        {% include "shared/icons/user-plus.html" with class="w-5 h-5" %}
                    </div>
                    <div class="timeline-content">
                        <h6>{% trans "✅ Account Created" %}</h6>
                        <p>{% trans "Your guest account has been set up" %}</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-icon active">
                        {% include "shared/icons/clock.html" with class="w-5 h-5" %}
                    </div>
                    <div class="timeline-content">
                        <h6>{% trans "⏳ Pending Coach Approval" %}</h6>
                        <p>{% trans "Our Crush Coach is reviewing your attendance (usually within 24 hours)" %}</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-icon pending">
                        {% include "shared/icons/envelope.html" with class="w-5 h-5" %}
                    </div>
                    <div class="timeline-content">
                        <h6>{% trans "Email Confirmation" %}</h6>
                        <p>{% trans "You'll receive an email once approved with event details" %}</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-icon pending">
                        {% include "shared/icons/calendar.html" with class="w-5 h-5" %}
                    </div>
                    <div class="timeline-content">
                        <h6>{% trans "Register for Event" %}</h6>
                        <p>{% blocktrans with title=event.title %}Complete your registration for {{ title }}{% endblocktrans %}</p>
                    </div>
                </div>
            </div>

            <!-- What to Expect -->
            <div class="alert alert-info bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 p-4 rounded-lg">
                <h6 class="alert-heading text-gray-900 dark:text-white font-semibold mb-2">{% include "shared/icons/information-circle.html" with class="w-5 h-5" %} {% trans "What to Expect" %}</h6>
                <ul class="text-start mb-0 text-gray-700 dark:text-gray-300">
                    <li>
                        <strong>{% trans "Check Your Email:" %}</strong>
                        {% blocktrans with email=invitation.guest_email %}We've sent a confirmation to <code>{{ email }}</code>{% endblocktrans %}
                    </li>
                    <li>
                        <strong>{% trans "Approval Timeline:" %}</strong>
                        {% trans "Most approvals are processed within 24 hours" %}
                    </li>
                    <li>
                        <strong>{% trans "Event Details:" %}</strong>
                        {% trans "Once approved, you'll receive all event information and registration instructions" %}
                    </li>
                    <li>
                        <strong>{% trans "Questions?" %}</strong>
                        {% blocktrans with contact=invitation.invited_by.get_full_name|default:"your Crush Coach" %}Contact {{ contact }} if you have any concerns{% endblocktrans %}
                    </li>
                </ul>
            </div>

            <!-- Event Details Box -->
            <div class="mt-4 p-4 bg-gradient-to-r from-purple-50/10 to-pink-50/10 dark:from-purple-900/20 dark:to-pink-900/20 rounded-2xl">
                <h5 class="text-purple-600 dark:text-purple-400 font-semibold">
                    {% include "shared/icons/calendar.html" with class="w-5 h-5" %} {% trans "Event Details" %}
                </h5>
                <h4 class="mt-3 text-gray-900 dark:text-white">{{ event.title }}</h4>
                <p class="mb-1">
                    {% include "shared/icons/calendar-days.html" with class="w-5 h-5" %}
                    <strong>{{ event.date_time|date:"l, F j, Y" }}</strong>
                </p>
                <p class="mb-1">
                    {% include "shared/icons/clock.html" with class="w-5 h-5" %}
                    {% blocktrans with time=event.date_time|date:"g:i A" minutes=event.duration_minutes %}{{ time }} ({{ minutes }} minutes){% endblocktrans %}
                </p>
                <p class="mb-0">
                    {% include "shared/icons/map-pin.html" with class="w-5 h-5" %}
                    {{ event.location }}
                </p>
            </div>

            <!-- Action Buttons -->
            <div class="mt-8">
                <a href="{% url 'crush_lu:dashboard' %}" class="btn-crush-primary inline-flex items-center gap-2 px-8 py-3 text-lg">
                    {% include "shared/icons/home.html" with class="w-5 h-5" %} {% trans "Go to Dashboard" %}
                </a>
                <p class="mt-3 text-gray-500 dark:text-gray-400">
                    <small>
                        {% trans "You can view your invitation status and event details from your dashboard." %}
                    </small>
                </p>
            </div>
        </div>

        <!-- Help Section -->
        <div class="text-center mt-4">
            <p class="text-gray-500 dark:text-gray-400">
                <small>
                    {% include "shared/icons/question-mark-circle.html" with class="w-5 h-5" %}
                    {% trans "Need help? Contact us at" %}
                    <a href="mailto:hello@crush.lu" class="text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300">hello@crush.lu</a>
                </small>
            </p>
        </div>
    </div>
</div>
{% endblock %}
