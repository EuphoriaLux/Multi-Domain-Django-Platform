{% extends 'crush_lu/base.html' %}
{% load static %}

{% block title %}Dating Events Luxembourg - Speed Dating & Singles Meetups | Crush.lu{% endblock %}

{% block og_title %}Dating Events in Luxembourg | Crush.lu{% endblock %}
{% block og_description %}Browse upcoming speed dating events, social mixers, and singles meetups in Luxembourg. Join Crush.lu events to meet real people and make authentic connections.{% endblock %}

{% block twitter_title %}Dating Events in Luxembourg | Crush.lu{% endblock %}
{% block twitter_description %}Browse upcoming speed dating events, social mixers, and singles meetups in Luxembourg. Join Crush.lu events to meet real people.{% endblock %}

{% block meta_description %}Find upcoming dating events in Luxembourg. Crush.lu hosts speed dating nights, social mixers, activity meetups, and themed events for singles looking for authentic connections.{% endblock %}
{% block meta_keywords %}dating events luxembourg, speed dating luxembourg, singles meetups, social mixer luxembourg, crush.lu events, luxembourg dating events{% endblock %}

{% block structured_data %}
{{ block.super }}

<!-- Breadcrumb Schema -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://crush.lu/"
        },
        {
            "@type": "ListItem",
            "position": 2,
            "name": "Events",
            "item": "https://crush.lu{% url 'crush_lu:event_list' %}"
        }
    ]
}
</script>

<!-- ItemList Schema for Event Collection -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "ItemList",
    "name": "Upcoming Dating Events in Luxembourg",
    "description": "Speed dating, social mixers, and singles meetups organized by Crush.lu",
    "itemListElement": [
        {% for event in events %}
        {
            "@type": "ListItem",
            "position": {{ forloop.counter }},
            "item": {
                "@type": "Event",
                "name": "{{ event.title|escapejs }}",
                "startDate": "{{ event.date_time|date:'c' }}",
                "location": {
                    "@type": "Place",
                    "name": "{{ event.location|escapejs }}",
                    "address": "{{ event.address|escapejs }}"
                },
                "url": "https://crush.lu{% url 'crush_lu:event_detail' event.id %}"
            }
        }{% if not forloop.last %},{% endif %}
        {% endfor %}
    ]
}
</script>
{% endblock %}

{% block extra_css %}
<!-- Styles are in static/crush_lu/css/pages/events.css -->
{% endblock %}

{% load analytics %}
{% block content %}
{# Track event list view with count in Application Insights #}
{% appinsights_event "events_page_viewed" event_count=events|length %}
<h2 class="text-2xl font-bold mb-6">Upcoming Events</h2>

{% if unpublished_count > 0 %}
<div class="bg-yellow-50 border border-yellow-200 text-yellow-800 rounded-lg p-4 mb-6 flex items-center gap-2">
    {% include "crush_lu/icons/exclamation-triangle.html" with class="w-5 h-5" %}
    <div>
        <strong>Coach Notice:</strong> There {{ unpublished_count|pluralize:"is,are" }} {{ unpublished_count }} unpublished event{{ unpublished_count|pluralize }} that won't show here.
        <a href="/crush-admin/crush_lu/meetupevent/" class="underline font-semibold hover:text-yellow-900">Go to Admin to publish {{ unpublished_count|pluralize:"it,them" }}</a>.
    </div>
</div>
{% endif %}

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for event in events %}
    <div class="bg-white rounded-xl shadow-sm h-full {% if event.is_private_invitation %}vip-event-card relative{% endif %}">
        <div class="p-6 flex flex-col h-full">
            {% if event.is_private_invitation %}
            <div class="vip-badge">
                {% include "crush_lu/icons/star.html" with class="w-4 h-4 inline" %} Private Invitation
            </div>
            {% endif %}
            <div class="flex justify-between items-start mb-3">
                <h5 class="font-semibold text-lg mb-0">{{ event.title }}</h5>
                <span class="inline-flex items-center px-2.5 py-1 text-xs font-semibold bg-gradient-to-r from-crush-purple to-crush-pink text-white rounded-full">{{ event.get_event_type_display }}</span>
            </div>

            <p class="text-gray-500 mb-3 text-sm">
                üìÖ {{ event.date_time|date:"D, M j, Y" }}<br>
                ‚è∞ {{ event.date_time|date:"g:i A" }} ({{ event.duration_minutes }} min)<br>
                üìç {{ event.location }}<br>
                üë• Ages {{ event.min_age }}-{{ event.max_age }}
            </p>

            <p class="mb-4">{{ event.description|truncatewords:25 }}</p>

            <div class="mt-auto">
                <div class="flex justify-between items-center mb-3">
                    <small class="text-gray-500">
                        {% if event.is_full %}
                            <span class="inline-flex items-center px-2 py-0.5 text-xs font-semibold bg-red-500 text-white rounded-full">Full</span>
                        {% else %}
                            {{ event.spots_remaining }} spots left
                        {% endif %}
                    </small>
                    {% if event.registration_fee > 0 %}
                        <strong>‚Ç¨{{ event.registration_fee }}</strong>
                    {% else %}
                        <strong class="text-green-600">Free</strong>
                    {% endif %}
                </div>

                <a href="{% url 'crush_lu:event_detail' event.id %}" class="btn-crush-primary w-full text-center block py-2">
                    View Details
                </a>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-span-full">
        <div class="bg-white rounded-xl shadow-sm">
            <div class="text-center py-12 px-6">
                <h4 class="text-xl font-semibold mb-2">No events scheduled yet</h4>
                <p class="text-gray-500">Check back soon for upcoming meetups and speed dating events!</p>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
