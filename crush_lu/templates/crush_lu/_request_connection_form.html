{% load i18n %}
<div id="connection-actions-{{ recipient.id }}" class="space-y-2" role="status" aria-live="polite">
    <form hx-post="{% url 'crush_lu:request_connection_inline' event.id recipient.id %}"
          hx-target="#connection-actions-{{ recipient.id }}"
          hx-swap="outerHTML"
          class="space-y-2">
        {% csrf_token %}
        <div>
            <textarea name="note"
                      rows="2"
                      placeholder="{% trans 'Add a note (optional)...' %}"
                      class="w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"></textarea>
        </div>
        <div class="flex flex-col sm:flex-row gap-2">
            <button type="submit"
                    class="btn-crush-primary px-4 py-2.5 inline-flex items-center justify-center gap-2">
                <span class="htmx-indicator">
                    {% include "shared/icons/loading.html" with class="w-4 h-4 animate-spin" %}
                </span>
                <span class="htmx-hide-on-request inline-flex items-center gap-1">
                    {% include "shared/icons/heart.html" with class="w-4 h-4" %}
                    {% trans "Send Request" %}
                </span>
            </button>
            <button type="button"
                    hx-get="{% url 'crush_lu:connection_actions' event.id recipient.id %}"
                    hx-target="#connection-actions-{{ recipient.id }}"
                    hx-swap="outerHTML"
                    class="px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-center">
                {% trans "Cancel" %}
            </button>
        </div>
    </form>
</div>
