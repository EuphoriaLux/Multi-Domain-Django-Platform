{% extends 'crush_lu/base.html' %}

{% block title %}Data Deletion - Crush.lu{% endblock %}

{% block content %}
<div class="flex justify-center py-8 px-4">
    <div class="w-full max-w-3xl">
        <div class="bg-white rounded-xl shadow-sm">
            <div class="p-8">
                <h1 class="text-3xl font-bold mb-4">Data Deletion Request</h1>
                <p class="text-gray-500 mb-6"><small>Last Updated: January 14, 2025</small></p>

                <div class="bg-blue-50 border border-blue-200 text-blue-800 rounded-lg p-4 mb-6 flex items-start gap-3">
                    {% include "crush_lu/icons/info.html" with class="w-5 h-5 flex-shrink-0 mt-0.5" %}
                    <div>
                        <strong>Your Right to Erasure</strong><br>
                        Under GDPR and Luxembourg data protection laws, you have the right to request deletion of your personal data.
                    </div>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-4">1. What Gets Deleted</h3>
                <p class="mb-4">
                    When you request account deletion, the following data is permanently removed:
                </p>
                <ul class="list-disc list-inside space-y-2 mb-6 text-gray-700">
                    <li><strong>Account Information:</strong> Email, name, date of birth, phone number</li>
                    <li><strong>Profile Data:</strong> Bio, interests, location, gender</li>
                    <li><strong>Photos:</strong> All profile photos stored on Azure Blob Storage</li>
                    <li><strong>Event Registrations:</strong> Your registration history and preferences</li>
                    <li><strong>Connection Messages:</strong> All messages exchanged through the platform</li>
                    <li><strong>Voting Records:</strong> Event activity votes and preferences</li>
                    <li><strong>Session Data:</strong> Authentication tokens and session information</li>
                </ul>

                <h3 class="text-xl font-semibold mt-8 mb-4">2. What May Be Retained</h3>
                <p class="mb-4">
                    For legal, safety, and operational reasons, we may retain certain anonymized or aggregated data:
                </p>
                <ul class="list-disc list-inside space-y-2 mb-6 text-gray-700">
                    <li><strong>Event Attendance Records:</strong> Anonymized attendance logs for safety and capacity planning</li>
                    <li><strong>Coach Notes:</strong> Internal coach notes (without identifying information) for platform improvement</li>
                    <li><strong>Moderation Records:</strong> Reports of policy violations for safety purposes</li>
                    <li><strong>Financial Records:</strong> Payment transaction records required by law (up to 7 years)</li>
                    <li><strong>Backup Systems:</strong> Data in automated backups (deleted within 90 days)</li>
                </ul>

                <h3 class="text-xl font-semibold mt-8 mb-4">3. Impact on Other Users</h3>
                <p class="mb-4">
                    After your account is deleted:
                </p>
                <ul class="list-disc list-inside space-y-2 mb-6 text-gray-700">
                    <li>Your profile will no longer be visible to other users</li>
                    <li>Pending connections will be cancelled</li>
                    <li>Event registrations will be removed (coaches will be notified if needed)</li>
                    <li>Other users will see "User Deleted" instead of your name in past interactions</li>
                </ul>

                <h3 class="text-xl font-semibold mt-8 mb-4">4. How to Request Deletion</h3>

                <h5 class="font-semibold mt-4 mb-2">Option 1: Delete Through Your Account (Recommended)</h5>
                {% if user.is_authenticated %}
                <div class="bg-amber-50 border border-amber-200 text-amber-800 rounded-lg p-4 mb-4 flex items-start gap-3">
                    {% include "crush_lu/icons/exclamation-triangle.html" with class="w-5 h-5 flex-shrink-0 mt-0.5" %}
                    <span><strong>Warning:</strong> Account deletion is permanent and cannot be undone.</span>
                </div>
                <ol class="list-decimal list-inside space-y-2 mb-6 text-gray-700">
                    <li>Go to your <a href="{% url 'crush_lu:dashboard' %}" class="text-purple-600 hover:underline">Dashboard</a></li>
                    <li>Click on "Account Settings"</li>
                    <li>Scroll to "Delete Account" section</li>
                    <li>Click "Delete My Account" and confirm</li>
                </ol>
                {% else %}
                <p class="mb-6">
                    <a href="{% url 'crush_lu:login' %}" class="btn-crush-primary inline-block px-6 py-3">Login to Delete Account</a>
                </p>
                {% endif %}

                <h5 class="font-semibold mt-4 mb-2">Option 2: Email Request</h5>
                <p class="mb-4">
                    If you cannot access your account, send an email to <strong>privacy@crush.lu</strong> with:
                </p>
                <ul class="list-disc list-inside space-y-2 mb-6 text-gray-700">
                    <li>Subject line: "Data Deletion Request"</li>
                    <li>Your full name</li>
                    <li>Email address associated with your account</li>
                    <li>Date of birth (for verification)</li>
                    <li>Reason for deletion (optional)</li>
                </ul>

                <h5 class="font-semibold mt-4 mb-2">Option 3: Facebook App Data Deletion</h5>
                <p class="mb-4">
                    If you signed up using Facebook, you can also request deletion through Facebook:
                </p>
                <ol class="list-decimal list-inside space-y-2 mb-4 text-gray-700">
                    <li>Go to your Facebook Settings</li>
                    <li>Navigate to "Apps and Websites"</li>
                    <li>Find "Crush.lu" in the list</li>
                    <li>Click "Remove" and follow Facebook's instructions</li>
                    <li>We will be notified and delete your data within 30 days</li>
                </ol>
                <p class="mb-6">
                    <strong>Callback URL for Facebook:</strong> <code class="bg-gray-100 px-2 py-1 rounded text-sm">https://crush.lu/facebook/data-deletion/</code>
                </p>

                <h3 class="text-xl font-semibold mt-8 mb-4">5. Deletion Timeline</h3>
                <div class="overflow-x-auto mb-6">
                    <table class="w-full border-collapse border border-gray-200">
                        <thead>
                            <tr class="bg-gray-50">
                                <th class="border border-gray-200 px-4 py-2 text-left">Data Type</th>
                                <th class="border border-gray-200 px-4 py-2 text-left">Deletion Timeline</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="border border-gray-200 px-4 py-2">Active Database Records</td>
                                <td class="border border-gray-200 px-4 py-2">Immediate (within 24 hours)</td>
                            </tr>
                            <tr>
                                <td class="border border-gray-200 px-4 py-2">Profile Photos (Azure Blob Storage)</td>
                                <td class="border border-gray-200 px-4 py-2">Within 7 days</td>
                            </tr>
                            <tr>
                                <td class="border border-gray-200 px-4 py-2">Backup Systems</td>
                                <td class="border border-gray-200 px-4 py-2">Within 90 days</td>
                            </tr>
                            <tr>
                                <td class="border border-gray-200 px-4 py-2">Anonymized Analytics</td>
                                <td class="border border-gray-200 px-4 py-2">Retained (no personal identifiers)</td>
                            </tr>
                            <tr>
                                <td class="border border-gray-200 px-4 py-2">Legal Compliance Records</td>
                                <td class="border border-gray-200 px-4 py-2">Up to 7 years (as required by law)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3 class="text-xl font-semibold mt-8 mb-4">6. Verification Process</h3>
                <p class="mb-4">
                    To protect your privacy and prevent unauthorized deletion requests, we may ask you to verify your identity:
                </p>
                <ul class="list-disc list-inside space-y-2 mb-6 text-gray-700">
                    <li>Login to your account (if accessible)</li>
                    <li>Provide answers to security questions</li>
                    <li>Confirm via registered email address</li>
                    <li>Provide photo ID (in cases of suspicious activity)</li>
                </ul>

                <h3 class="text-xl font-semibold mt-8 mb-4">7. Alternatives to Deletion</h3>
                <p class="mb-4">
                    If you're not ready for permanent deletion, consider these options:
                </p>
                <ul class="list-disc list-inside space-y-2 mb-6 text-gray-700">
                    <li><strong>Deactivate Account:</strong> Temporarily hide your profile without deletion</li>
                    <li><strong>Adjust Privacy Settings:</strong> Control who can see your information</li>
                    <li><strong>Unsubscribe from Emails:</strong> Stop receiving notifications</li>
                    <li><strong>Take a Break:</strong> Keep your account but stop using the platform</li>
                </ul>

                <h3 class="text-xl font-semibold mt-8 mb-4">8. Reactivation Policy</h3>
                <p class="mb-4">
                    Once your account is deleted, it cannot be recovered. If you wish to use Crush.lu again, you must:
                </p>
                <ul class="list-disc list-inside space-y-2 mb-6 text-gray-700">
                    <li>Create a new account with a new email address</li>
                    <li>Complete profile creation and coach review again</li>
                    <li>Your previous event history and connections will not be restored</li>
                </ul>

                <h3 class="text-xl font-semibold mt-8 mb-4">9. Contact Information</h3>
                <p class="mb-4">
                    For questions about data deletion or privacy concerns:
                </p>
                <ul class="space-y-2 mb-6 text-gray-700">
                    <li><strong>Email:</strong> <a href="mailto:privacy@crush.lu" class="text-purple-600 hover:underline">privacy@crush.lu</a></li>
                    <li><strong>Subject:</strong> "Data Deletion Request" or "Privacy Inquiry"</li>
                    <li><strong>Response Time:</strong> Within 48 hours</li>
                </ul>

                <h3 class="text-xl font-semibold mt-8 mb-4">10. Your Rights</h3>
                <p class="mb-4">
                    In addition to deletion, you have the right to:
                </p>
                <ul class="list-disc list-inside space-y-2 mb-6 text-gray-700">
                    <li><strong>Access:</strong> Request a copy of your data (send email to privacy@crush.lu)</li>
                    <li><strong>Rectification:</strong> Correct inaccurate information (edit in account settings)</li>
                    <li><strong>Restriction:</strong> Limit how we process your data</li>
                    <li><strong>Portability:</strong> Receive your data in a machine-readable format</li>
                    <li><strong>Objection:</strong> Object to certain types of data processing</li>
                </ul>

                <hr class="my-8 border-gray-200">

                <div class="bg-gray-50 border border-gray-200 rounded-lg p-6 text-center mb-6">
                    <p class="mb-4">
                        <strong>Need Help?</strong><br>
                        Our team is here to assist with any privacy concerns or technical issues.
                    </p>
                    <a href="mailto:privacy@crush.lu" class="btn-crush-primary inline-flex items-center gap-2 px-6 py-3">
                        {% include "crush_lu/icons/envelope.html" with class="w-4 h-4" %}
                        Contact Privacy Team
                    </a>
                </div>

                <div class="text-center">
                    <p class="text-gray-500 text-sm mb-4">
                        For more information, see our
                        <a href="{% url 'crush_lu:privacy_policy' %}" class="text-purple-600 hover:underline">Privacy Policy</a> and
                        <a href="{% url 'crush_lu:terms_of_service' %}" class="text-purple-600 hover:underline">Terms of Service</a>.
                    </p>
                    <a href="{% url 'crush_lu:home' %}" class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium border border-gray-300 text-gray-700 hover:bg-gray-50 rounded-lg transition-colors">
                        Back to Home
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
