{% extends "crush_lu/journey/gift_base.html" %}
{% load static i18n %}

{% block title %}{% trans "Gift Created!" %} - Crush.lu{% endblock %}

{% block gift_content %}
<div class="gift-card" x-data="giftShare"
     data-gift-url="{{ gift.get_qr_url }}"
     data-gift-code="{{ gift.gift_code }}"
     data-recipient="{{ gift.recipient_name }}">

    <div class="success-icon">
        <span>ğŸ</span>
    </div>

    <h1 class="gift-title">{% trans "Your Gift is Ready!" %}</h1>
    <p class="gift-subtitle">{% trans "Share this magical journey with" %} <strong>{{ gift.recipient_name }}</strong></p>

    {% if gift.qr_code_image %}
    <div class="qr-container">
        <img src="{{ gift.qr_code_image.url }}" alt="{% trans 'Gift QR Code' %}" id="qr-image">
    </div>
    {% endif %}

    <div class="gift-code-box">
        <p class="label">{% trans "Gift Code" %}</p>
        <p class="code">{{ gift.gift_code }}</p>
    </div>

    <!-- Sharing Suite -->
    <div class="sharing-suite">
        <h3>{% trans "Share Your Gift" %}</h3>

        <!-- Copy Link -->
        <button type="button" class="share-btn share-btn-copy" x-bind:data-copied="copied" @click="copyLink">
            <span class="share-icon">ğŸ“‹</span>
            <span x-text="copyButtonText">{% trans "Copy Link" %}</span>
        </button>

        <!-- Download QR -->
        {% if gift.qr_code_image %}
        <a href="{{ gift.qr_code_image.url }}" download="{{ gift.gift_code }}.png" class="share-btn share-btn-download">
            <span class="share-icon">ğŸ“¥</span>
            <span>{% trans "Download QR" %}</span>
        </a>
        {% endif %}

        <!-- WhatsApp Share -->
        <button type="button" class="share-btn share-btn-whatsapp" @click="shareWhatsApp">
            <span class="share-icon">ğŸ’¬</span>
            <span>{% trans "WhatsApp" %}</span>
        </button>

        <!-- Email Share -->
        <button type="button" class="share-btn share-btn-email" @click="shareEmail">
            <span class="share-icon">ğŸ“§</span>
            <span>{% trans "Email" %}</span>
        </button>

        <!-- Native Share (mobile only) -->
        <button type="button" class="share-btn share-btn-native"
                x-show="showNativeShare"
                @click="shareNative">
            <span class="share-icon">ğŸ”—</span>
            <span>{% trans "More Options..." %}</span>
        </button>
    </div>

    <div class="direct-link-box">
        <p class="label">{% trans "Direct Link" %}</p>
        <p class="link">{{ gift.get_qr_url }}</p>
    </div>

    <div class="action-buttons">
        <a href="{% url 'crush_lu:gift_create' %}" class="btn-gift btn-gift-primary">
            {% trans "Create Another Gift" %}
        </a>
        <a href="{% url 'crush_lu:gift_list' %}" class="btn-gift btn-gift-secondary">
            {% trans "View All Gifts" %}
        </a>
    </div>

    <p class="hint-text">
        {% trans "When they scan the QR code or click the link, they'll see your personalized message and can begin their Wonderland journey!" %}
    </p>
</div>
{% endblock %}
