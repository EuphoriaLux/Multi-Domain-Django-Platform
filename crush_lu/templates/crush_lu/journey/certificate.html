{% extends "crush_lu/journey/journey_base.html" %}
{% load static i18n %}

{% block journey_content %}
<div class="certificate-container animate-fade-in">
    <div class="certificate-confetti" aria-hidden="true">
        <div class="certificate-confetti-piece confetti-1"></div>
        <div class="certificate-confetti-piece confetti-2"></div>
        <div class="certificate-confetti-piece confetti-3"></div>
        <div class="certificate-confetti-piece confetti-4"></div>
        <div class="certificate-confetti-piece confetti-5"></div>
        <div class="certificate-confetti-piece confetti-6"></div>
        <div class="certificate-confetti-piece confetti-7"></div>
        <div class="certificate-confetti-piece confetti-8"></div>
        <div class="certificate-confetti-piece confetti-9"></div>
        <div class="certificate-confetti-piece confetti-10"></div>
        <div class="certificate-confetti-piece confetti-11"></div>
        <div class="certificate-confetti-piece confetti-12"></div>
        <div class="certificate-confetti-piece confetti-13"></div>
        <div class="certificate-confetti-piece confetti-14"></div>
        <div class="certificate-confetti-piece confetti-15"></div>
        <div class="certificate-confetti-piece confetti-16"></div>
        <div class="certificate-confetti-piece confetti-17"></div>
        <div class="certificate-confetti-piece confetti-18"></div>
        <div class="certificate-confetti-piece confetti-19"></div>
        <div class="certificate-confetti-piece confetti-20"></div>
        <div class="certificate-confetti-piece confetti-21"></div>
        <div class="certificate-confetti-piece confetti-22"></div>
        <div class="certificate-confetti-piece confetti-23"></div>
        <div class="certificate-confetti-piece confetti-24"></div>
        <div class="certificate-confetti-piece confetti-25"></div>
        <div class="certificate-confetti-piece confetti-26"></div>
        <div class="certificate-confetti-piece confetti-27"></div>
        <div class="certificate-confetti-piece confetti-28"></div>
        <div class="certificate-confetti-piece confetti-29"></div>
        <div class="certificate-confetti-piece confetti-30"></div>
    </div>
    <!-- Back Button -->
    <div class="certificate-back text-center mb-4">
        <a href="{% url 'crush_lu:journey_map' %}" class="nav-btn">
            {% include "shared/icons/arrow-left.html" with class="w-5 h-5" %} {% trans "Back to Journey Map" %}
        </a>
    </div>

    <div class="certificate">
        <!-- Decorative Seal -->
        <div class="certificate-seal">
            ğŸ†
        </div>

        <!-- Header -->
        <div class="certificate-header">
            <div class="certificate-ornament">ğŸŒŸ âœ¨ ğŸŒŸ</div>
            <h1 class="certificate-title">{% trans "CERTIFICATE OF COMPLETION" %}</h1>
            <p class="certificate-subtitle">{% trans "For extraordinary courage and dedication" %}</p>
        </div>

        <!-- Body -->
        <div class="certificate-body">
            <p class="certify-text">{% trans "This certifies that" %}</p>

            <div class="recipient-name">
                {{ journey_progress.user.first_name }} {{ journey_progress.user.last_name }}
            </div>

            <p class="achievement-text">
                {% trans "has successfully completed the journey through" %}
            </p>

            <div class="certificate-journey-title">
                "{{ journey.journey_name }}"
            </div>

            <p class="achievement-text">
                {% trans "Demonstrating courage, wisdom, and the ability to see magic in the everyday." %}
            </p>

            <!-- Stats -->
            <div class="stats-section">
                <div class="stat-box">
                    <div class="stat-value">{{ total_chapters }}</div>
                    <div class="stat-label">{% trans "Chapters Completed" %}</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value">{{ total_points }}</div>
                    <div class="stat-label">{% trans "Points Earned" %}</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value">âˆ</div>
                    <div class="stat-label">{% trans "Hearts Captured" %}</div>
                </div>
            </div>

            {% if hours_spent > 0 %}
            <p class="achievement-text">
                {% blocktrans with hours=hours_spent minutes=minutes_spent %}Time invested in this journey: <strong>{{ hours }}h {{ minutes }}m</strong>{% endblocktrans %}
            </p>
            {% endif %}

            <!-- Quote -->
            <div class="quote-section">
                <p class="quote-text">
                    {% trans "Not all who wander are lost, but some wander straight into each other's hearts." %}
                </p>
            </div>

            <!-- Personal Message -->
            <p class="achievement-text certificate-personal-message">
                {{ journey.final_message }}
            </p>
        </div>

        <!-- Footer -->
        <div class="certificate-footer">
            <div class="signature-section">
                <div class="signature-line"></div>
                <div class="signature-label">{% trans "Date Completed" %}</div>
                <div class="certificate-signature-value">
                    {{ completion_date|date:"DATE_FORMAT" }}
                </div>
            </div>

            <div class="signature-section">
                <div class="signature-line"></div>
                <div class="signature-label">{% trans "Created with" %}</div>
                <div class="certificate-signature-value">
                    {% trans "ğŸ’– Hours of thinking about you" %}
                </div>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button type="button" class="action-btn" data-certificate-print>
            {% include "shared/icons/printer.html" with class="w-5 h-5" %} {% trans "Print Certificate" %}
        </button>
        <a href="{% url 'crush_lu:journey_map' %}" class="action-btn action-btn-secondary">
            {% include "shared/icons/map.html" with class="w-5 h-5" %} {% trans "View Journey Map" %}
        </a>
        <a href="{% url 'crush_lu:dashboard' %}" class="action-btn action-btn-secondary">
            {% include "shared/icons/home.html" with class="w-5 h-5" %} {% trans "Dashboard" %}
        </a>
    </div>
</div>
{% endblock %}

{% block extra_journey_js %}
<script defer src="{% static 'crush_lu/js/journey-certificate.js' %}"></script>
{% endblock %}
