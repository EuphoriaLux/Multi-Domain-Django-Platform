<div class="bg-white rounded-xl shadow-sm p-4">
    <div class="flex items-center gap-4">
        <!-- Profile Photo -->
        <div class="shrink-0">
            {% if other_user.crushprofile.photo_1 %}
                <img src="{{ other_user.crushprofile.photo_1.url }}"
                     alt="{{ other_user.first_name }}"
                     class="w-14 h-14 rounded-full object-cover"
                     loading="lazy">
            {% else %}
                <div class="w-14 h-14 rounded-full bg-gradient-to-br from-crush-purple to-crush-pink flex items-center justify-center">
                    <span class="text-white text-lg font-semibold">{{ other_user.first_name|first }}</span>
                </div>
            {% endif %}
        </div>

        <!-- Info -->
        <div class="flex-1 min-w-0">
            <h5 class="font-semibold mb-1">{{ other_user.first_name }}</h5>
            <p class="text-gray-500 text-sm mb-2 flex items-center gap-1">
                {% include "crush_lu/icons/calendar.html" with class="w-4 h-4" %}
                {{ connection.event.title }}
            </p>

            <!-- Status Badge -->
            {% if connection.status == 'accepted' %}
                <span class="inline-flex items-center gap-1 px-2 py-0.5 text-xs font-semibold bg-blue-500 text-white rounded-full">
                    {% include "crush_lu/icons/clock.html" with class="w-3 h-3" %}
                    Assigned to Coach
                    {% if connection.assigned_coach %}
                        ({{ connection.assigned_coach.user.first_name }})
                    {% endif %}
                </span>
            {% elif connection.status == 'coach_reviewing' %}
                <span class="inline-flex items-center gap-1 px-2 py-0.5 text-xs font-semibold bg-purple-500 text-white rounded-full">
                    {% include "crush_lu/icons/user.html" with class="w-3 h-3" %}
                    Coach Reviewing
                </span>
            {% elif connection.status == 'coach_approved' %}
                <span class="inline-flex items-center gap-1 px-2 py-0.5 text-xs font-semibold bg-yellow-500 text-gray-900 rounded-full">
                    {% include "crush_lu/icons/check-circle.html" with class="w-3 h-3" %}
                    Pending Your Consent
                </span>
            {% elif connection.status == 'shared' %}
                <span class="inline-flex items-center gap-1 px-2 py-0.5 text-xs font-semibold bg-green-500 text-white rounded-full">
                    {% include "crush_lu/icons/check-circle.html" with class="w-3 h-3" %}
                    Contacts Shared!
                </span>
            {% endif %}
        </div>

        <!-- Action Button -->
        <div class="shrink-0">
            <a href="{% url 'crush_lu:connection_detail' connection.id %}"
               class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium border border-purple-500 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors">
                <span>View Details</span>
                {% include "crush_lu/icons/arrow-right.html" with class="w-4 h-4" %}
            </a>
        </div>
    </div>
</div>
