{% extends 'crush_lu/advent/door_default.html' %}

{% block advent_content %}
<div class="advent-header">
    <a href="{% url 'crush_lu:advent_calendar' %}" class="advent-back-btn">
        <i class="bi bi-arrow-left"></i> Back to Calendar
    </a>
</div>

<div class="advent-content">
    <div class="container">
        <div class="door-content-card gift-card">
            <div class="door-badge mb-4">
                <span class="badge bg-danger fs-4 px-4 py-2">Day {{ door_number }}</span>
            </div>

            {% if content %}
                <div class="gift-icon text-center mb-4">
                    <span style="font-size: 4rem;" class="gift-animation">üéÅ</span>
                </div>

                <h2 class="text-center mb-4">{{ content.title }}</h2>

                {% if content.message %}
                    <div class="gift-message text-center mb-4">
                        {{ content.message|linebreaks }}
                    </div>
                {% endif %}

                {% if content.gift_hint %}
                    <div class="gift-hint-box">
                        <h5><i class="bi bi-lightbulb"></i> Hint</h5>
                        <p>{{ content.gift_hint }}</p>
                    </div>
                {% endif %}

                {% if content.gift_location_clue %}
                    <div class="gift-location-box mt-3">
                        <h5><i class="bi bi-geo-alt"></i> Where to find it</h5>
                        <p>{{ content.gift_location_clue }}</p>
                    </div>
                {% endif %}

                {% if content.photo %}
                    <div class="gift-image text-center mt-4">
                        <img src="{{ content.photo.url }}" alt="Gift preview"
                             class="img-fluid rounded shadow" style="max-height: 300px;">
                    </div>
                {% endif %}

                {% if show_bonus and content.has_bonus_content %}
                    <div class="bonus-content">
                        <h4>{{ content.bonus_title|default:"You found it!" }}</h4>
                        {% if content.bonus_content %}{{ content.bonus_content|linebreaks }}{% endif %}
                        {% if content.bonus_photo %}
                            <img src="{{ content.bonus_photo.url }}" alt="Your gift" class="img-fluid rounded mt-3">
                        {% endif %}
                    </div>
                {% elif has_qr_bonus and not show_bonus %}
                    <div class="bonus-hint text-center mt-4 p-4" style="background: linear-gradient(135deg, #fff3cd, #ffeeba); border-radius: 12px;">
                        <span style="font-size: 2.5rem;">üéÑ</span>
                        <h5 class="mt-2">Found the gift?</h5>
                        <p class="mb-0 text-muted">Scan the QR code on it to reveal the full message!</p>
                    </div>
                {% endif %}
            {% else %}
                <div class="no-content text-center py-5">
                    <span style="font-size: 3rem;">üéÅ</span>
                    <h3 class="mt-3">Gift Teaser Coming Soon!</h3>
                </div>
            {% endif %}

            <div class="door-navigation d-flex justify-content-between mt-4 pt-4 border-top">
                {% if door_number > 1 %}
                    <a href="{% url 'crush_lu:advent_door' door_number|add:'-1' %}" class="btn btn-outline-secondary"><i class="bi bi-arrow-left"></i> Previous</a>
                {% else %}<span></span>{% endif %}
                <a href="{% url 'crush_lu:advent_calendar' %}" class="btn btn-primary"><i class="bi bi-grid"></i> Calendar</a>
                {% if door_number < 24 %}
                    <a href="{% url 'crush_lu:advent_door' door_number|add:'1' %}" class="btn btn-outline-secondary">Next <i class="bi bi-arrow-right"></i></a>
                {% else %}<span></span>{% endif %}
            </div>
        </div>
    </div>
</div>

<style>
    .gift-card {
        background: linear-gradient(135deg, #fff5f5 0%, #ffe4e4 100%);
    }

    .gift-animation {
        display: inline-block;
        animation: bounce 1s infinite;
    }

    @keyframes bounce {
        0%, 100% { transform: translateY(0) rotate(-5deg); }
        50% { transform: translateY(-15px) rotate(5deg); }
    }

    .gift-hint-box, .gift-location-box {
        background: rgba(255,255,255,0.8);
        border-radius: 12px;
        padding: 1rem 1.5rem;
        border-left: 4px solid #c41e3a;
    }

    .gift-hint-box h5, .gift-location-box h5 {
        color: #c41e3a;
        margin-bottom: 0.5rem;
    }

    .gift-location-box {
        border-left-color: #27ae60;
    }

    .gift-location-box h5 {
        color: #27ae60;
    }
</style>
{% endblock %}
