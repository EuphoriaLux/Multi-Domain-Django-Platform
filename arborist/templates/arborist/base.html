{% load static %}
{% load i18n %}
{% load analytics %}
{% load arborist_seo_tags %}
{% get_current_language as LANGUAGE_CODE %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ page_title|default:"Arborist Tom Aakrann - Tree Care Luxembourg" }}{% endblock %}</title>

    <!-- Theme Color (Arborist brand green) -->
    <meta name="theme-color" content="#45622a">
    <meta name="msapplication-TileColor" content="#45622a">

    <!-- Favicon and Icons -->
    <link rel="icon" type="image/svg+xml" href="{% static 'arborist/icons/favicon.svg' %}">
    <link rel="icon" type="image/x-icon" href="{% static 'arborist/icons/favicon.ico' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'arborist/icons/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'arborist/icons/favicon-16x16.png' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'arborist/icons/apple-touch-icon.png' %}">
    <link rel="manifest" href="{% static 'arborist/manifest.json' %}">

    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="{% static 'arborist/css/tailwind.css' %}">

    <!-- SEO Meta Tags -->
    <meta name="description" content="{% block meta_description %}{{ meta_description|default:"Arborist Tom Aakrann - Professional tree care in Luxembourg. FLL-certified tree inspector, SKT-B rope climbing technician." }}{% endblock %}">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="{% canonical_url %}">

    <!-- SEO: Hreflang tags for multi-language support (en, de, fr) -->
    {% hreflang_tags %}

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="{% block og_title %}{{ page_title|default:"Arborist Tom Aakrann" }}{% endblock %}">
    <meta property="og:description" content="{{ meta_description|default:"Professional tree care in Luxembourg. FLL-certified tree inspector, SKT-B rope climbing technician." }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://arborist.lu{{ request.path }}">
    <meta property="og:site_name" content="Arborist Tom Aakrann">
    <meta property="og:locale" content="{{ LANGUAGE_CODE }}">
    <meta property="og:image" content="https://arborist.lu{% static 'arborist/social/og_preview.jpg' %}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://arborist.lu{% static 'arborist/social/twitter_card.jpg' %}">

    <!-- LocalBusiness Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "@id": "https://arborist.lu/#business",
        "name": "Arborist Tom Aakrann",
        "description": "{% trans 'Professional tree care in Luxembourg. FLL-certified tree inspector, SKT-B rope climbing technician. Fruit tree care, tree maintenance, tree inspection.' %}",
        "url": "https://arborist.lu",
        "telephone": "+352621981363",
        "email": "info@arborist.lu",
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "Luxemburg",
            "addressCountry": "LU"
        },
        "geo": {
            "@type": "GeoCoordinates",
            "latitude": "49.6116",
            "longitude": "6.1319"
        },
        "areaServed": {
            "@type": "Country",
            "name": "Luxembourg"
        },
        "priceRange": "$$",
        "openingHoursSpecification": [
            {
                "@type": "OpeningHoursSpecification",
                "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
                "opens": "08:00",
                "closes": "18:00"
            }
        ],
        "sameAs": [],
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "{% trans 'Tree Care Services' %}",
            "itemListElement": [
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "{% trans 'Fruit Tree Care' %}",
                        "url": "https://arborist.lu/{{ LANGUAGE_CODE }}/obstbaumpflege/"
                    }
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "{% trans 'Tree Care' %}",
                        "url": "https://arborist.lu/{{ LANGUAGE_CODE }}/baumpflege/"
                    }
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "{% trans 'Tree Inspection' %}",
                        "url": "https://arborist.lu/{{ LANGUAGE_CODE }}/baumkontrolle/"
                    }
                }
            ]
        }
    }
    </script>

    {% block extra_head %}{% endblock %}

    <!-- Google Analytics 4 with Consent Mode v2 -->
    {% analytics_head %}

    <!-- Azure Application Insights Browser SDK (authenticated users only for performance) -->
    {% if user.is_authenticated %}{% appinsights_head %}{% endif %}
</head>
<body class="bg-white text-gray-900">
    {% analytics_body %}
    {% include "includes/staging_banner.html" %}
    {% include "arborist/partials/navigation.html" %}

    <main>
        {% block content %}{% endblock %}
    </main>

    {% include "arborist/partials/footer.html" %}

    <!-- WhatsApp Floating Button -->
    {% include "arborist/partials/whatsapp_button.html" %}

    {% block extra_js %}{% endblock %}

    <!-- GDPR Cookie Consent Banner -->
    {% include "includes/cookie_banner.html" %}
</body>
</html>
